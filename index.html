<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhistlerBrew.com - Mike's Digital Playground</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Courier+Prime&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           ROOT VARIABLES - The time machine starts here
           ============================================ */
        :root {
            /* C64 Era (1980s) */
            --c64-bg: #3e31a2;
            --c64-text: #7bfc9c;
            --c64-border: #6c5eb5;

            /* Modern Era */
            --modern-bg: #0a0e27;
            --modern-text: #e0e6ed;
            --modern-accent: #00d9ff;

            /* Forest Era */
            --forest-bg: #1a2f23;
            --forest-text: #f0f4f0;
            --forest-accent: #4a9d5f;

            /* Fire theme (because firefighter) */
            --fire-orange: #ff6b35;
            --fire-red: #d32f2f;
        }

        /* ============================================
           RESET & BASE STYLES
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--c64-bg);
            color: var(--c64-text);
            overflow-x: hidden;
            transition: background-color 1s ease, color 1s ease;
        }

        /* ============================================
           SECTION 1: COMMODORE 64 TERMINAL
           ============================================ */
        .c64-section {
            min-height: 100vh;
            background: var(--c64-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            position: relative;
        }

        .terminal-container {
            width: 90%;
            max-width: 800px;
            background: var(--c64-bg);
            border: 16px solid var(--c64-border);
            border-radius: 12px;
            padding: 30px;
            box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.5),
                        0 0 30px rgba(123, 252, 156, 0.3);
            font-family: 'VT323', monospace;
            font-size: 20px;
            line-height: 1.4;
            position: relative;
        }

        .terminal-screen {
            color: var(--c64-text);
            text-shadow: 0 0 8px var(--c64-text);
            letter-spacing: 1px;
        }

        .terminal-line {
            margin-bottom: 8px;
        }

        .terminal-prompt {
            color: var(--c64-text);
        }

        .cursor {
            display: inline-block;
            width: 12px;
            height: 20px;
            background: var(--c64-text);
            animation: blink 1s step-end infinite;
            margin-left: 2px;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        .terminal-input {
            background: transparent;
            border: none;
            color: var(--c64-text);
            font-family: 'VT323', monospace;
            font-size: 20px;
            outline: none;
            width: calc(100% - 120px);
            text-shadow: 0 0 8px var(--c64-text);
            caret-color: transparent;
        }

        .input-line {
            display: flex;
            align-items: center;
        }

        .scroll-hint {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--c64-text);
            font-family: 'VT323', monospace;
            font-size: 18px;
            animation: bounce 2s infinite;
            text-shadow: 0 0 8px var(--c64-text);
        }

        @keyframes bounce {
            0%, 100% { transform: translate(-50%, 0); }
            50% { transform: translate(-50%, -10px); }
        }

        /* Sticky note with available games */
        .sticky-note {
            position: absolute;
            top: 80px;
            right: 20px;
            width: 200px;
            background: #feff9c;
            padding: 15px;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.5);
            transform: rotate(2deg);
            font-family: 'Courier Prime', monospace;
            color: #333;
            border-bottom: 20px solid #f0e68c;
        }

        .sticky-note h3 {
            font-size: 14px;
            margin-bottom: 8px;
            text-decoration: underline;
            color: #000;
        }

        .sticky-note ul {
            list-style: none;
            font-size: 12px;
            line-height: 1.6;
        }

        .sticky-note li {
            margin-bottom: 4px;
        }

        .sticky-note li::before {
            content: '> ';
            color: #d32f2f;
        }

        /* Game canvas overlay */
        #gameCanvas {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 9999;
        }

        @media (max-width: 768px) {
            .sticky-note {
                right: 10px;
                top: 60px;
                width: 150px;
                font-size: 10px;
                padding: 10px;
            }
        }

        /* ============================================
           SECTION 2: TRANSITION ZONE - EARLY WEB
           ============================================ */
        .transition-section {
            min-height: 100vh;
            background: linear-gradient(180deg, var(--c64-bg) 0%, #1a1a2e 50%, var(--modern-bg) 100%);
            padding: 80px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .content-box {
            max-width: 800px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 40px;
            backdrop-filter: blur(10px);
            margin-bottom: 40px;
        }

        .content-box h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--fire-orange), var(--fire-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .content-box h2 {
            font-size: 2rem;
            margin: 30px 0 15px 0;
            color: var(--modern-accent);
        }

        .content-box p {
            font-size: 1.2rem;
            line-height: 1.8;
            color: var(--modern-text);
            margin-bottom: 15px;
        }

        .content-box em {
            color: var(--fire-orange);
            font-style: italic;
        }

        /* ============================================
           SECTION 3: MODERN WEB - WHO IS MIKE?
           ============================================ */
        .modern-section {
            min-height: 100vh;
            background: var(--modern-bg);
            padding: 80px 20px;
            color: var(--modern-text);
        }

        .interests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            max-width: 1000px;
            margin: 40px auto;
        }

        .interest-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 8px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .interest-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--modern-accent), var(--fire-orange));
        }

        .interest-card:hover {
            transform: translateY(-5px);
            border-color: var(--modern-accent);
            box-shadow: 0 10px 30px rgba(0, 217, 255, 0.2);
        }

        .interest-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--modern-accent);
        }

        .interest-card p {
            font-size: 1rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.7);
        }

        .interest-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        /* ============================================
           SECTION 4: PNW FOREST WITH CODE OVERLAY
           ============================================ */
        .forest-section {
            min-height: 100vh;
            background: linear-gradient(180deg, var(--modern-bg) 0%, var(--forest-bg) 100%);
            padding: 80px 20px;
            position: relative;
            overflow: hidden;
        }

        .forest-bg {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            z-index: 0;
        }

        .trees-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60%;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
        }

        .tree {
            opacity: 0.7;
        }

        .code-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            font-family: 'Courier Prime', monospace;
            font-size: 14px;
            color: rgba(74, 157, 95, 0.15);
            overflow: hidden;
            pointer-events: none;
            line-height: 1.6;
            padding: 20px;
            white-space: pre;
        }

        .forest-content {
            position: relative;
            z-index: 10;
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }

        .forest-content h2 {
            font-size: 2.5rem;
            color: var(--forest-text);
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 50px;
        }

        .nav-button {
            background: linear-gradient(135deg, var(--forest-accent), var(--modern-accent));
            color: white;
            padding: 15px 35px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(74, 157, 95, 0.4);
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(74, 157, 95, 0.6);
        }

        .footer-note {
            margin-top: 60px;
            font-size: 0.9rem;
            color: rgba(240, 244, 240, 0.6);
            font-style: italic;
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */
        @media (max-width: 768px) {
            .terminal-container {
                font-size: 16px;
                padding: 20px;
            }

            .content-box h1 {
                font-size: 2rem;
            }

            .content-box p {
                font-size: 1rem;
            }

            .interests-grid {
                grid-template-columns: 1fr;
            }

            .nav-links {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>

    <!-- ============================================
         SECTION 1: COMMODORE 64 BOOT SEQUENCE
         ============================================ -->
    <section class="c64-section">
        <!-- Sticky note with available games -->
        <div class="sticky-note">
            <h3>AVAILABLE GAMES:</h3>
            <ul>
                <li>LOAD "*",8</li>
                <li>LOAD "RDS",8</li>
            </ul>
            <p style="font-size: 10px; margin-top: 8px; font-style: italic;">
                Click terminal to start!
            </p>
        </div>

        <div class="terminal-container">
            <div class="terminal-screen" id="terminalScreen">
                <div class="terminal-line">**** COMMODORE 64 BASIC V2 ****</div>
                <div class="terminal-line">64K RAM SYSTEM  38911 BASIC BYTES FREE</div>
                <div class="terminal-line">&nbsp;</div>
                <div class="terminal-line">WELCOME TO WHISTLERBREW.COM</div>
                <div class="terminal-line">&nbsp;</div>
                <div class="terminal-line">WARNING: THIS IS NOT A REAL WEBSITE.</div>
                <div class="terminal-line">THIS IS WHERE MIKE PLAYS WITH CODE, AI,</div>
                <div class="terminal-line">AND QUESTIONABLE IDEAS.</div>
                <div class="terminal-line">&nbsp;</div>
                <div class="terminal-line">PROCEED AT YOUR OWN RISK.</div>
                <div class="terminal-line">&nbsp;</div>
                <div class="terminal-line input-line" id="initialInputLine">
                    <span class="terminal-prompt">READY.</span>
                    <span id="currentInput"></span>
                    <span class="cursor"></span>
                </div>
                <div class="terminal-line" style="margin-top: 10px; font-size: 16px; opacity: 0.7;">
                    (START TYPING: LOAD "*",8 OR YOUR FAVORITE BASIC CODE)
                </div>
            </div>
        </div>
        <div class="scroll-hint">‚ñº SCROLL TO LOAD FUTURE ‚ñº</div>
    </section>

    <!-- ============================================
         RACING DESTRUCTION SET GAME CANVAS
         ============================================ -->
    <canvas id="gameCanvas"></canvas>

    <!-- ============================================
         SECTION 2: TRANSITION - THE DISCLAIMER
         ============================================ -->
    <section class="transition-section">
        <div class="content-box">
            <h1>WhistlerBrew.com</h1>
            <p>
                Congratulations! You've time-traveled from 1982 to... well, somewhere between
                dial-up and 5G. This is <em>not</em> a professional portfolio. This is <em>not</em>
                a corporate website. This is where I build weird stuff, break things, and
                occasionally fix them.
            </p>
            <p>
                Think of this as my digital garage. Sometimes there's a cool project in here.
                Sometimes there's just me trying to remember how CSS Grid works.
            </p>
            <p>
                <strong>Fair warning:</strong> Expect half-finished experiments, AI rabbit holes,
                and the occasional dad joke in the code comments.
            </p>
        </div>
    </section>

    <!-- ============================================
         SECTION 3: MODERN WEB - WHO IS MIKE?
         ============================================ -->
    <section class="modern-section">
        <div class="content-box">
            <h2>So... Who's Behind This Madness?</h2>
            <p>
                Hi, I'm Mike. By day, I do things that involve spreadsheets, data, and way too many
                browser tabs. By night (and weekends, and early mornings...) I'm chasing down
                whatever shiny tech catches my eye.
            </p>
        </div>

        <div class="interests-grid">
            <div class="interest-card">
                <div class="interest-icon">üî•</div>
                <h3>Structure Fire</h3>
                <p>Battling blazes in buildings. Because someone's gotta do it, and apparently I thought it looked fun.</p>
            </div>

            <div class="interest-card">
                <div class="interest-icon">üå≤</div>
                <h3>Wildland Fire</h3>
                <p>Structure protection in the wild. Saving homes while surrounded by trees that really want to be charcoal.</p>
            </div>

            <div class="interest-card">
                <div class="interest-icon">üèñÔ∏è</div>
                <h3>Mexico Escapes</h3>
                <p>Beaches, tacos, and strategic WiFi avoidance. My preferred method of ctrl+alt+del on life.</p>
            </div>

            <div class="interest-card">
                <div class="interest-icon">üìä</div>
                <h3>Excel Wizardry</h3>
                <p>Yes, I unironically love Excel. Pivot tables are beautiful. Fight me.</p>
            </div>

            <div class="interest-card">
                <div class="interest-icon">üìà</div>
                <h3>Power BI</h3>
                <p>Making data look pretty since... whenever Power BI became a thing. DAX is a lifestyle.</p>
            </div>

            <div class="interest-card">
                <div class="interest-icon">ü§ñ</div>
                <h3>AI Everything</h3>
                <p>ChatGPT, Gemini, Claude... if it talks back and hallucinates facts, I'm probably playing with it.</p>
            </div>
        </div>
    </section>

    <!-- ============================================
         SECTION 4: PNW FOREST - WHERE TO GO
         ============================================ -->
    <section class="forest-section">
        <!-- Animated code in background -->
        <div class="code-overlay" id="codeOverlay"></div>

        <!-- SVG Trees -->
        <div class="forest-bg">
            <div class="trees-container">
                <svg class="tree" width="120" height="250" viewBox="0 0 120 250">
                    <polygon points="60,20 100,100 80,100 110,160 70,160 60,250 50,250 10,160 40,160 20,100 60,20" fill="#2d5016" opacity="0.8"/>
                    <rect x="55" y="160" width="10" height="90" fill="#3d2817"/>
                </svg>
                <svg class="tree" width="150" height="300" viewBox="0 0 150 300">
                    <polygon points="75,10 120,110 100,110 130,180 90,180 75,300 65,300 20,180 50,180 30,110 75,10" fill="#1e3a0f" opacity="0.9"/>
                    <rect x="70" y="180" width="10" height="120" fill="#2d1810"/>
                </svg>
                <svg class="tree" width="100" height="220" viewBox="0 0 100 220">
                    <polygon points="50,30 80,90 65,90 90,150 60,150 50,220 40,220 10,150 35,150 15,90 50,30" fill="#3a5a1f" opacity="0.7"/>
                    <rect x="45" y="150" width="10" height="70" fill="#4a3520"/>
                </svg>
                <svg class="tree" width="130" height="270" viewBox="0 0 130 270">
                    <polygon points="65,15 105,105 85,105 115,175 75,175 65,270 55,270 15,175 45,175 25,105 65,15" fill="#254716" opacity="0.85"/>
                    <rect x="60" y="175" width="10" height="95" fill="#362818"/>
                </svg>
            </div>
        </div>

        <div class="forest-content">
            <h2>Welcome to the Pacific Northwest Digital Forest</h2>
            <p style="font-size: 1.2rem; color: rgba(240, 244, 240, 0.9); max-width: 700px; margin: 0 auto;">
                You've reached the end of the time tunnel. Or maybe the beginning?
                Either way, here's where you can explore the stuff I've been building, breaking, and rebuilding.
            </p>

            <div class="nav-links">
                <a href="stuff-i-build.html" class="nav-button">Stuff I Build</a>
                <a href="things-im-working-on.html" class="nav-button">Things I'm Working On</a>
                <a href="other-stuff.html" class="nav-button">Other Stuff</a>
            </div>

            <p class="footer-note">
                Made with caffeine, stubbornness, and a concerning amount of AI assistance.<br>
                ¬© 2025 Mike @ WhistlerBrew.com | Not a real company | Probably never will be
            </p>
        </div>
    </section>

    <!-- ============================================
         JAVASCRIPT - THE MAGIC SAUCE
         ============================================ -->
    <script>
        // ============================================
        // INTERACTIVE TERMINAL EASTER EGG
        // ============================================
        const terminalScreen = document.getElementById('terminalScreen');
        let terminalInput = '';
        let isTerminalActive = true; // Auto-activated on page load
        let basicProgram = [];
        let isRunningProgram = false;

        // Focus the page so keyboard input works immediately
        window.addEventListener('load', () => {
            document.body.focus();
        });

        // Keyboard input handler
        document.addEventListener('keydown', (e) => {
            if (!isTerminalActive || isRunningProgram) return;

            const currentInput = document.getElementById('currentInput');
            if (!currentInput) return;

            if (e.key === 'Enter') {
                handleCommand(terminalInput);
                terminalInput = '';
            } else if (e.key === 'Backspace') {
                e.preventDefault();
                terminalInput = terminalInput.slice(0, -1);
                currentInput.textContent = terminalInput;
            } else if (e.key.length === 1) {
                terminalInput += e.key.toUpperCase();
                currentInput.textContent = terminalInput;
            }
        });

        function handleCommand(cmd) {
            const currentInputLine = document.querySelector('.input-line');
            currentInputLine.querySelector('.cursor').remove();

            // Add the command to screen
            const cmdLine = document.createElement('div');
            cmdLine.className = 'terminal-line';
            cmdLine.textContent = cmd;
            currentInputLine.appendChild(cmdLine);

            // Process commands
            const trimmedCmd = cmd.trim();

            // Check for LOAD commands (allow with or without space after LOAD)
            const loadRDSMatch = trimmedCmd.match(/^LOAD\s*"?(RDS|\*)"?,8,?1?$/i);

            if (loadRDSMatch) {
                addTerminalLine('SEARCHING FOR *');
                addTerminalLine('LOADING');
                addTerminalLine('READY.');
                addTerminalLine('');
                setTimeout(() => {
                    addTerminalLine('RACING DESTRUCTION SET');
                    addTerminalLine('BY ELECTRONIC ARTS - 1985');
                    addTerminalLine('');
                    addTerminalLine('UPDATED FOR 2025 BY MIKE');
                    addTerminalLine('');
                    addTerminalLine('LAUNCHING...');
                    setTimeout(() => {
                        startRacingGame();
                    }, 1500);
                }, 1000);
            } else if (trimmedCmd.match(/^\d+\s+PRINT/i)) {
                // BASIC program line
                basicProgram.push(trimmedCmd);
                addTerminalLine('OK');
                resetTerminal();
            } else if (trimmedCmd === 'RUN') {
                runBasicProgram();
            } else if (trimmedCmd === 'LIST') {
                basicProgram.forEach(line => addTerminalLine(line));
                resetTerminal();
            } else if (trimmedCmd === 'NEW') {
                basicProgram = [];
                addTerminalLine('OK');
                resetTerminal();
            } else if (trimmedCmd !== '') {
                addTerminalLine('?SYNTAX ERROR');
                resetTerminal();
            } else {
                resetTerminal();
            }
        }

        function addTerminalLine(text) {
            const line = document.createElement('div');
            line.className = 'terminal-line';
            line.textContent = text;
            terminalScreen.appendChild(line);
            terminalScreen.parentElement.scrollTop = terminalScreen.parentElement.scrollHeight;
        }

        function resetTerminal() {
            setTimeout(() => {
                const inputLine = document.createElement('div');
                inputLine.className = 'terminal-line input-line';
                inputLine.innerHTML = '<span class="terminal-prompt">READY.</span><span id="currentInput"></span><span class="cursor"></span>';
                terminalScreen.appendChild(inputLine);
                terminalScreen.parentElement.scrollTop = terminalScreen.parentElement.scrollHeight;
            }, 500);
        }

        function runBasicProgram() {
            if (basicProgram.length === 0) {
                addTerminalLine('?NO PROGRAM');
                resetTerminal();
                return;
            }

            isRunningProgram = true;

            // Parse and execute simple BASIC
            const sortedProgram = basicProgram.sort((a, b) => {
                const numA = parseInt(a.split(' ')[0]);
                const numB = parseInt(b.split(' ')[0]);
                return numA - numB;
            });

            let currentLine = 0;
            let iterations = 0;
            const maxIterations = 20; // Prevent infinite loops from running forever

            function executeNextLine() {
                if (currentLine >= sortedProgram.length || iterations >= maxIterations) {
                    if (iterations >= maxIterations) {
                        addTerminalLine('');
                        addTerminalLine('...AND SO ON (STOPPED AT 20 LINES)');
                    }
                    isRunningProgram = false;
                    resetTerminal();
                    return;
                }

                const line = sortedProgram[currentLine];
                const match = line.match(/^\d+\s+PRINT\s+"?([^"]*)"?/i);

                if (match) {
                    addTerminalLine(match[1]);
                    iterations++;
                }

                // Check for GOTO
                const gotoMatch = line.match(/GOTO\s+(\d+)/i);
                if (gotoMatch) {
                    const targetLine = gotoMatch[1];
                    const targetIndex = sortedProgram.findIndex(l => l.startsWith(targetLine + ' '));
                    if (targetIndex !== -1) {
                        currentLine = targetIndex;
                    } else {
                        currentLine++;
                    }
                } else {
                    currentLine++;
                }

                setTimeout(executeNextLine, 200);
            }

            executeNextLine();
        }

        // ============================================
        // ANIMATED CODE OVERLAY IN FOREST
        // ============================================
        const codeSnippets = [
            'function explorePNW() {',
            '  const trees = ["Douglas Fir", "Western Red Cedar"];',
            '  return trees.map(tree => grow(tree));',
            '}',
            '',
            'class Firefighter extends Hero {',
            '  constructor() {',
            '    super("Mike");',
            '    this.coffee = Infinity;',
            '  }',
            '}',
            '',
            '// TODO: Add more Mexico vacation time',
            'const workLifeBalance = calculateRatio();',
            'if (workLifeBalance < 0.3) {',
            '  bookFlight("Puerto Vallarta");',
            '}',
            '',
            'SELECT * FROM projects',
            'WHERE status = "half-finished"',
            'ORDER BY excitement DESC;',
        ];

        const codeOverlay = document.getElementById('codeOverlay');
        if (codeOverlay) {
            codeOverlay.textContent = codeSnippets.join('\n').repeat(5);
        }

        // ============================================
        // SCROLL-TRIGGERED TRANSITIONS
        // ============================================
        const observerOptions = {
            threshold: 0.3,
            rootMargin: '0px'
        };

        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.content-box, .interest-card').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.8s ease-out';
            sectionObserver.observe(el);
        });

        // ============================================
        // RACING GAME - Top-Down Racer
        // Actually fun to play!
        // ============================================

function startRacingGame() {
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    canvas.style.display = 'block';
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let gameRunning = true;

    // C64 Colors
    const C64 = {
        blue: '#3e31a2',
        green: '#7bfc9c',
        red: '#d32f2f',
        yellow: '#feff9c',
        white: '#ffffff',
        black: '#000000',
        gray: '#808080',
        darkGray: '#505050'
    };

    // Player car (stays in center of screen, track scrolls)
    const player = {
        x: canvas.width / 2,
        y: canvas.height - 200,
        vx: 0,
        vy: 0,
        angle: -Math.PI / 2, // Point up
        speed: 0,
        maxSpeed: 6,
        acceleration: 0.15,
        friction: 0.96,
        turnSpeed: 0.06,
        width: 24,
        height: 36,
        isSpinning: false,
        spinTimer: 0
    };

    // Opponent car
    const opponent = {
        x: canvas.width / 2 - 60,
        worldY: -200,
        vx: 0,
        vy: 4,
        angle: -Math.PI / 2,
        speed: 4,
        width: 24,
        height: 36
    };

    // Camera/world offset
    let worldOffsetY = 0;
    let currentLap = 0;
    const totalLaps = 3;

    // Track checkpoints for lap counting
    const checkpoints = [
        { y: -100, passed: false },
        { y: -2000, passed: false },
        { y: -4000, passed: false },
        { y: -6000, passed: false }
    ];

    // Track obstacles and elements
    const trackElements = [];

    function createTrack() {
        const trackLength = 8000;

        // Add barriers along sides
        for (let i = 0; i < trackLength; i += 200) {
            // Left barriers
            if (Math.random() < 0.6) {
                trackElements.push({
                    type: 'barrier',
                    x: canvas.width / 2 - 250,
                    y: -i - 100,
                    width: 30,
                    height: 30,
                    hit: false
                });
            }

            // Right barriers
            if (Math.random() < 0.6) {
                trackElements.push({
                    type: 'barrier',
                    x: canvas.width / 2 + 220,
                    y: -i - 100,
                    width: 30,
                    height: 30,
                    hit: false
                });
            }
        }

        // Add jump ramps
        for (let i = 800; i < trackLength; i += 1200) {
            trackElements.push({
                type: 'ramp',
                x: canvas.width / 2 - 40,
                y: -i,
                width: 80,
                height: 20
            });
        }

        // Add oil slicks
        for (let i = 500; i < trackLength; i += 900) {
            trackElements.push({
                type: 'oil',
                x: canvas.width / 2 + (Math.random() - 0.5) * 300,
                y: -i,
                width: 50,
                height: 50
            });
        }

        // Add finish line
        trackElements.push({
            type: 'finish',
            x: canvas.width / 2 - 200,
            y: 0,
            width: 400,
            height: 10
        });
    }

    createTrack();

    // Input
    const keys = {};
    window.addEventListener('keydown', (e) => {
        keys[e.key] = true;
        if (e.key === 'Escape') exitGame();
    });

    window.addEventListener('keyup', (e) => {
        keys[e.key] = false;
    });

    function exitGame() {
        gameRunning = false;
        canvas.style.display = 'none';
        isRunningProgram = false;
        resetTerminal();
    }

    // Game loop
    function update() {
        if (!gameRunning) return;

        if (!player.isSpinning) {
            // Player controls
            if (keys['ArrowUp']) {
                player.speed += player.acceleration;
            }
            if (keys['ArrowDown']) {
                player.speed -= player.acceleration * 0.7;
            }

            // Steering (only when moving)
            if (Math.abs(player.speed) > 0.5) {
                if (keys['ArrowLeft']) {
                    player.angle -= player.turnSpeed * (player.speed / player.maxSpeed);
                }
                if (keys['ArrowRight']) {
                    player.angle += player.turnSpeed * (player.speed / player.maxSpeed);
                }
            }

            // Speed limits and friction
            player.speed = Math.max(-player.maxSpeed / 2, Math.min(player.maxSpeed, player.speed));
            player.speed *= player.friction;

            // Convert angle and speed to velocity
            player.vx = Math.cos(player.angle) * player.speed;
            player.vy = Math.sin(player.angle) * player.speed;

            // Update world offset (track scrolls)
            worldOffsetY += player.vy;

            // Horizontal wrapping (keep player from going off sides)
            player.x += player.vx;
            if (player.x < canvas.width / 2 - 300) player.x = canvas.width / 2 - 300;
            if (player.x > canvas.width / 2 + 300) player.x = canvas.width / 2 + 300;

        } else {
            // Spinning out
            player.spinTimer--;
            player.angle += 0.3;
            player.speed *= 0.9;
            if (player.spinTimer <= 0) {
                player.isSpinning = false;
            }
        }

        // Update opponent (simple AI)
        opponent.worldY += opponent.vy;
        opponent.x += Math.sin(Date.now() * 0.001) * 2; // Weave

        // Check lap/checkpoint progress
        checkpoints.forEach((cp, idx) => {
            const screenY = cp.y + worldOffsetY;
            if (!cp.passed && screenY > player.y && screenY < player.y + 50) {
                cp.passed = true;

                // Check if all checkpoints passed = lap complete
                if (idx === checkpoints.length - 1 && checkpoints.every(c => c.passed)) {
                    currentLap++;
                    checkpoints.forEach(c => c.passed = false);
                }
            }
        });

        // Collision detection
        trackElements.forEach(el => {
            const screenY = el.y + worldOffsetY;

            if (screenY > player.y - 100 && screenY < player.y + player.height + 50) {
                const dx = player.x - el.x - el.width / 2;
                const dy = player.y - screenY;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < 40) {
                    if (el.type === 'barrier' && !el.hit && !player.isSpinning) {
                        el.hit = true;
                        player.speed *= 0.5;
                    }

                    if (el.type === 'oil' && !player.isSpinning) {
                        player.isSpinning = true;
                        player.spinTimer = 30;
                    }
                }
            }
        });

        // Win condition
        if (currentLap >= totalLaps) {
            drawVictoryScreen();
            setTimeout(exitGame, 3000);
            return;
        }
    }

    function draw() {
        if (!gameRunning) return;

        // Clear with C64 blue
        ctx.fillStyle = C64.blue;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Draw track (road)
        ctx.fillStyle = C64.gray;
        ctx.fillRect(canvas.width / 2 - 300, 0, 600, canvas.height);

        // Track side lines
        ctx.strokeStyle = C64.white;
        ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.moveTo(canvas.width / 2 - 300, 0);
        ctx.lineTo(canvas.width / 2 - 300, canvas.height);
        ctx.moveTo(canvas.width / 2 + 300, 0);
        ctx.lineTo(canvas.width / 2 + 300, canvas.height);
        ctx.stroke();

        // Center dashed line
        ctx.setLineDash([20, 20]);
        ctx.lineWidth = 2;
        const dashOffset = (-worldOffsetY % 40);
        ctx.save();
        ctx.translate(0, dashOffset);
        ctx.beginPath();
        ctx.moveTo(canvas.width / 2, -40);
        ctx.lineTo(canvas.width / 2, canvas.height + 40);
        ctx.stroke();
        ctx.restore();
        ctx.setLineDash([]);

        // Draw track elements
        trackElements.forEach(el => {
            const screenY = el.y + worldOffsetY;

            if (screenY > -100 && screenY < canvas.height + 100) {
                ctx.save();

                if (el.type === 'barrier') {
                    ctx.fillStyle = el.hit ? C64.darkGray : C64.red;
                    ctx.fillRect(el.x, screenY, el.width, el.height);
                    if (!el.hit) {
                        ctx.strokeStyle = C64.white;
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(el.x, screenY);
                        ctx.lineTo(el.x + el.width, screenY + el.height);
                        ctx.moveTo(el.x + el.width, screenY);
                        ctx.lineTo(el.x, screenY + el.height);
                        ctx.stroke();
                    }
                }

                if (el.type === 'ramp') {
                    ctx.fillStyle = C64.yellow;
                    ctx.beginPath();
                    ctx.moveTo(el.x, screenY + el.height);
                    ctx.lineTo(el.x + el.width, screenY + el.height);
                    ctx.lineTo(el.x + el.width, screenY);
                    ctx.closePath();
                    ctx.fill();
                }

                if (el.type === 'oil') {
                    ctx.fillStyle = C64.black;
                    ctx.beginPath();
                    ctx.ellipse(el.x + el.width / 2, screenY + el.height / 2, el.width / 2, el.height / 2, 0, 0, Math.PI * 2);
                    ctx.fill();
                }

                if (el.type === 'finish') {
                    ctx.fillStyle = C64.white;
                    for (let i = 0; i < 8; i++) {
                        ctx.fillStyle = i % 2 === 0 ? C64.white : C64.black;
                        ctx.fillRect(el.x + i * 50, screenY, 50, el.height);
                    }
                }

                ctx.restore();
            }
        });

        // Draw opponent
        const oppScreenY = opponent.worldY + worldOffsetY;
        if (oppScreenY > -100 && oppScreenY < canvas.height + 100) {
            drawCar(opponent.x, oppScreenY, opponent.angle, C64.red);
        }

        // Draw player car
        drawCar(player.x, player.y, player.angle, C64.green);

        // HUD
        ctx.fillStyle = C64.green;
        ctx.font = '28px "VT323", monospace';
        ctx.fillText(`SPEED: ${Math.floor(Math.abs(player.speed) * 20)}`, 20, 40);
        ctx.fillText(`LAP: ${currentLap + 1}/${totalLaps}`, 20, 75);

        if (player.isSpinning) {
            ctx.fillStyle = C64.yellow;
            ctx.font = '40px "VT323", monospace';
            ctx.fillText('SPIN OUT!', canvas.width / 2 - 80, 60);
        }

        // Controls
        ctx.fillStyle = C64.white;
        ctx.font = '20px "VT323", monospace';
        ctx.fillText('‚Üë GAS | ‚Üì BRAKE | ‚Üê ‚Üí STEER | ESC QUIT', canvas.width / 2 - 240, canvas.height - 20);
    }

    function drawCar(x, y, angle, color) {
        ctx.save();
        ctx.translate(x, y);
        ctx.rotate(angle);

        // Car body
        ctx.fillStyle = color;
        ctx.fillRect(-12, -18, 24, 36);

        // Windshield
        ctx.fillStyle = C64.blue;
        ctx.fillRect(-8, -12, 16, 14);

        // Wheels
        ctx.fillStyle = C64.black;
        ctx.fillRect(-14, -15, 5, 10);
        ctx.fillRect(9, -15, 5, 10);
        ctx.fillRect(-14, 5, 5, 10);
        ctx.fillRect(9, 5, 5, 10);

        ctx.restore();
    }

    function drawVictoryScreen() {
        ctx.fillStyle = C64.blue;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = C64.green;
        ctx.font = '60px "VT323", monospace';
        ctx.textAlign = 'center';
        ctx.fillText('RACE COMPLETE!', canvas.width / 2, canvas.height / 2 - 40);

        ctx.font = '32px "VT323", monospace';
        ctx.fillText('YOU FINISHED ' + totalLaps + ' LAPS!', canvas.width / 2, canvas.height / 2 + 20);

        ctx.font = '24px "VT323", monospace';
        ctx.fillText('RETURNING TO TERMINAL...', canvas.width / 2, canvas.height / 2 + 80);
    }

    function gameLoop() {
        update();
        draw();
        if (gameRunning) {
            requestAnimationFrame(gameLoop);
        }
    }

    gameLoop();
}
    </script>

</body>
</html>
